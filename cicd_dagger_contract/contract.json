{
  "version": "1.0.0",
  "functions": {
    "Build": {
      "description": "Builds a multi-architecture Docker image and exports it as an OCI tarball",
      "returns": "File",
      "parameters": {
        "golang": [
          { "name": "ctx", "type": "context.Context", "required": true },
          { "name": "source", "type": "*dagger.Directory", "required": true },
          { "name": "releaseCandidate", "type": "bool", "required": false }
        ],
        "python": [
          { "name": "source", "type": "dagger.Directory", "required": true },
          { "name": "release_candidate", "type": "bool", "required": false }
        ],
        "java": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ],
        "typescript": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ]
      }
    },
    "UnitTest": {
      "description": "Runs unit tests against the built application container",
      "returns": "string",
      "parameters": {
        "golang": [
          { "name": "ctx", "type": "context.Context", "required": true },
          { "name": "source", "type": "*dagger.Directory", "required": true },
          { "name": "buildArtifact", "type": "*dagger.File", "required": false }
        ],
        "python": [
          { "name": "source", "type": "dagger.Directory", "required": true },
          { "name": "build_artifact", "type": "dagger.File", "required": false }
        ],
        "java": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "buildArtifact", "type": "File", "required": false }
        ],
        "typescript": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "buildArtifact", "type": "File", "required": false }
        ]
      }
    },
    "IntegrationTest": {
      "description": "Runs integration tests against a deployed application instance",
      "returns": "string",
      "parameters": {
        "golang": [
          { "name": "ctx", "type": "context.Context", "required": true },
          { "name": "source", "type": "*dagger.Directory", "required": true },
          { "name": "targetHost", "type": "string", "required": false },
          { "name": "targetPort", "type": "string", "required": false }
        ],
        "python": [
          { "name": "source", "type": "dagger.Directory", "required": true },
          { "name": "target_host", "type": "str", "required": false },
          { "name": "target_port", "type": "str", "required": false }
        ],
        "java": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "targetHost", "type": "String", "required": false },
          { "name": "targetPort", "type": "String", "required": false }
        ],
        "typescript": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "targetHost", "type": "string", "required": false },
          { "name": "targetPort", "type": "string", "required": false }
        ]
      }
    },
    "Deliver": {
      "description": "Publishes container images and Helm charts to artifact repositories",
      "returns": "string",
      "parameters": {
        "golang": [
          { "name": "ctx", "type": "context.Context", "required": true },
          { "name": "source", "type": "*dagger.Directory", "required": true },
          { "name": "containerRepository", "type": "string", "required": false },
          { "name": "helmRepository", "type": "string", "required": false },
          { "name": "buildArtifact", "type": "*dagger.File", "required": false },
          { "name": "releaseCandidate", "type": "bool", "required": false }
        ],
        "python": [
          { "name": "source", "type": "dagger.Directory", "required": true },
          { "name": "container_repository", "type": "str", "required": false },
          { "name": "helm_repository", "type": "str", "required": false },
          { "name": "build_artifact", "type": "dagger.File", "required": false },
          { "name": "release_candidate", "type": "bool", "required": false }
        ],
        "java": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "containerRepository", "type": "String", "required": false },
          { "name": "helmRepository", "type": "String", "required": false },
          { "name": "buildArtifact", "type": "File", "required": false },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ],
        "typescript": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "containerRepository", "type": "string", "required": false },
          { "name": "helmRepository", "type": "string", "required": false },
          { "name": "buildArtifact", "type": "File", "required": false },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ]
      }
    },
    "Deploy": {
      "description": "Deploys the application to a Kubernetes cluster using Helm",
      "returns": "string",
      "parameters": {
        "golang": [
          { "name": "ctx", "type": "context.Context", "required": true },
          { "name": "source", "type": "*dagger.Directory", "required": true },
          { "name": "kubeconfig", "type": "*dagger.Secret", "required": true },
          { "name": "helmRepository", "type": "string", "required": false },
          { "name": "releaseName", "type": "string", "required": false },
          { "name": "namespace", "type": "string", "required": false },
          { "name": "releaseCandidate", "type": "bool", "required": false }
        ],
        "python": [
          { "name": "source", "type": "dagger.Directory", "required": true },
          { "name": "kubeconfig", "type": "dagger.Secret", "required": true },
          { "name": "helm_repository", "type": "str", "required": false },
          { "name": "release_name", "type": "str", "required": false },
          { "name": "namespace", "type": "str", "required": false },
          { "name": "release_candidate", "type": "bool", "required": false }
        ],
        "java": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "kubeconfig", "type": "Secret", "required": true },
          { "name": "helmRepository", "type": "String", "required": false },
          { "name": "releaseName", "type": "String", "required": false },
          { "name": "namespace", "type": "String", "required": false },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ],
        "typescript": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "kubeconfig", "type": "Secret", "required": true },
          { "name": "helmRepository", "type": "string", "required": false },
          { "name": "releaseName", "type": "string", "required": false },
          { "name": "namespace", "type": "string", "required": false },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ]
      }
    },
    "Validate": {
      "description": "Validates that a deployment is healthy and functioning correctly",
      "returns": "string",
      "parameters": {
        "golang": [
          { "name": "ctx", "type": "context.Context", "required": true },
          { "name": "source", "type": "*dagger.Directory", "required": true },
          { "name": "kubeconfig", "type": "*dagger.Secret", "required": true },
          { "name": "releaseName", "type": "string", "required": false },
          { "name": "namespace", "type": "string", "required": false },
          { "name": "expectedVersion", "type": "string", "required": false },
          { "name": "releaseCandidate", "type": "bool", "required": false }
        ],
        "python": [
          { "name": "source", "type": "dagger.Directory", "required": true },
          { "name": "kubeconfig", "type": "dagger.Secret", "required": true },
          { "name": "release_name", "type": "str", "required": false },
          { "name": "namespace", "type": "str", "required": false },
          { "name": "expected_version", "type": "str", "required": false },
          { "name": "release_candidate", "type": "bool", "required": false }
        ],
        "java": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "kubeconfig", "type": "Secret", "required": true },
          { "name": "releaseName", "type": "String", "required": false },
          { "name": "namespace", "type": "String", "required": false },
          { "name": "expectedVersion", "type": "String", "required": false },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ],
        "typescript": [
          { "name": "source", "type": "Directory", "required": true },
          { "name": "kubeconfig", "type": "Secret", "required": true },
          { "name": "releaseName", "type": "string", "required": false },
          { "name": "namespace", "type": "string", "required": false },
          { "name": "expectedVersion", "type": "string", "required": false },
          { "name": "releaseCandidate", "type": "boolean", "required": false }
        ]
      }
    }
  }
}
